(function() {
    'use strict';
    
    const config = {
        baseTexts: [
            "üöÄ ACTIVE SERVER üöÄ https://www.roblox.com/share?code=02c4589b59d6fb40888620df677c49ec&type=Server üöÄ DAILY GIVEAWAYS üöÄ",
            "üíé EXCLUSIVE ACCESS üíé https://www.roblox.com/share?code=02c4589b59d6fb40888620df677c49ec&type=Server üíé LIMITED TIME üíé",
            "üéØ BEST SERVER üöÄ https://www.roblox.com/share?code=02c4589b59d6fb40888620df677c49ec&type=Server üéØ JOIN FAST üéØ",
            "‚ö° 24/7 ACTIVE ‚ö° https://www.roblox.com/share?code=02c4589b59d6fb40888620df677c49ec&type=Server ‚ö° DON'T MISS ‚ö°"
        ],
        waitTime: 2000,
        intervalTime: 300,
        maxAttempts: 1000000,
        maxPosts: 0,
        randomDelay: true
    };
    
    let postCount = 0;
    let isRunning = true;
    
    console.log("ü§ñ AUTO POSTER STARTED - INFINITE MODE WITH RANDOM TEXT");
    
    function wait(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }
    
    function generateRandomCode() {
        const chars = 'abcdefghijklmnopqrstuvwxyz0123456789';
        let result = '';
        for (let i = 0; i < 5; i++) {
            result += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        return result;
    }
    
    function getRandomText() {
        const baseText = config.baseTexts[Math.floor(Math.random() * config.baseTexts.length)];
        const randomCode = generateRandomCode();
        return baseText + ' ' + randomCode;
    }
    
    function getRandomDelay() {
        if (!config.randomDelay) return config.intervalTime;
        return config.intervalTime + Math.random() * 5000;
    }
    
    async function findElement(selector, description) {
        for (let i = 0; i < config.maxAttempts; i++) {
            const element = document.querySelector(selector);
            if (element) {
                console.log(`‚úÖ ${description} FOUND`);
                return element;
            }
            console.log(`‚è≥ WAITING FOR ${description}... (ATTEMPT ${i + 1})`);
            await wait(500);
        }
        throw new Error(`‚ùå ${description} NOT FOUND`);
    }
    
    async function typeText(element, text) {
        element.focus();
        element.value = '';
        
        for (let char of text) {
            element.value += char;
            element.dispatchEvent(new Event('input', { bubbles: true }));
            element.dispatchEvent(new Event('change', { bubbles: true }));
            await wait(30 + Math.random() * 50);
        }
        
        console.log(`üìù TEXT TYPED: "${text}"`);
    }
    
    function triggerAngularClick(element) {
        const angularElement = angular.element(element);
        const scope = angularElement.scope();
        
        if (scope && scope.sendPost) {
            console.log("üîÑ ANGULAR TRIGGERED");
            scope.$apply(() => {
                scope.sendPost();
            });
            return true;
        }
        
        try {
            angularElement.triggerHandler('click');
            console.log("üîÑ ANGULAR CLICK");
            return true;
        } catch (e) {
            console.log("‚ùå ANGULAR FAILED, USING NATIVE CLICK");
        }
        
        element.click();
        console.log("üñ±Ô∏è NATIVE CLICK");
        return true;
    }
    
    async function createPost() {
        try {
            postCount++;
            console.log(`\nüîÑ POST ${postCount} STARTING...`);
            
            const textSelectors = [
                'textarea',
                'input[type="text"]',
                '[contenteditable="true"]',
                '.text-field',
                '.post-input',
                '.comment-input'
            ];
            
            let textField = null;
            for (let selector of textSelectors) {
                textField = document.querySelector(selector);
                if (textField && textField.offsetParent !== null) break;
            }
            
            if (!textField) {
                const placeholders = ['What\'s new?', 'Post something...', 'Write a post...', 'Share something...'];
                for (let placeholder of placeholders) {
                    const element = document.querySelector(`[placeholder*="${placeholder}"]`);
                    if (element) {
                        textField = element;
                        break;
                    }
                }
            }
            
            if (!textField) throw new Error("NO TEXT FIELD FOUND");
            
            console.log("‚úÖ TEXT FIELD FOUND");
            await wait(config.waitTime);
            
            const text = getRandomText();
            await typeText(textField, text);
            await wait(config.waitTime);
            
            const buttonSelectors = [
                '#postButton',
                'button[ng-click*="sendPost"]',
                'button[ng-click*="Post"]',
                '.btn-control-md',
                '.group-form-button',
                'button:contains("Post")'
            ];
            
            let postButton = null;
            for (let selector of buttonSelectors) {
                postButton = document.querySelector(selector);
                if (postButton && postButton.offsetParent !== null) {
                    console.log(`‚úÖ BUTTON FOUND: ${selector}`);
                    break;
                }
            }
            
            if (!postButton) throw new Error("NO POST BUTTON FOUND");
            
            console.log("‚úÖ POST BUTTON FOUND");
            
            if (postButton.disabled) {
                console.log("‚ö†Ô∏è BUTTON DISABLED, RETRYING...");
                textField.dispatchEvent(new Event('input', { bubbles: true }));
                await wait(1000);
            }
            
            await wait(config.waitTime);
            
            console.log("üñ±Ô∏è CLICKING POST BUTTON...");
            triggerAngularClick(postButton);
            
            console.log(`üéâ POST ${postCount} COMPLETE!`);
            
            await wait(3000);
            
            return true;
            
        } catch (error) {
            console.error("‚ùå ERROR:", error.message);
            console.log("üí° RETRYING...");
            return true;
        }
    }
    
    async function startLoop() {
        console.log(`
ü§ñ ROBLOX AUTO POSTER - INFINITE MODE WITH RANDOM CODES
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üìù TEXTS: ${config.baseTexts.length} VARIATIONS + RANDOM 5 CHAR CODE
‚è±Ô∏è  WAIT: ${config.waitTime}ms
üîÑ INTERVAL: ${config.intervalTime}ms
üìä MAX: INFINITE FOREVER

STARTING IN 3 SECONDS...
        `);
        
        await wait(3000);
        
        while (isRunning) {
            await createPost();
            if (!isRunning) break;
            
            const delay = getRandomDelay();
            console.log(`‚è∞ NEXT POST IN ${Math.round(delay/1000)}s...`);
            await wait(delay);
        }
        
        console.log("üõë AUTO POSTER STOPPED.");
    }
    
    window.stopAutoPoster = function() {
        console.log("üõë MANUAL STOP!");
        isRunning = false;
    };
    
    window.startAutoPoster = function() {
        if (!isRunning) {
            isRunning = true;
            startLoop();
        }
    };
    
    console.log("üéõÔ∏è  CONTROLS:");
    console.log("- stopAutoPoster() - STOP");
    console.log("- startAutoPoster() - START");
    
    startLoop();
    
})();
