// Roblox Auto Poster - ENGLISH VERSION
(function() {
    'use strict';
    
    const config = {
        texts: [
            "ğŸ”¥ JOIN NOW ğŸ”¥ https://www.roblox.com/share?code=02c4589b59d6fb40888620df677c49ec&type=Server ğŸ”¥ FREE REWARDS ğŸ”¥",
            "ğŸš€ ACTIVE SERVER ğŸš€ https://www.roblox.com/share?code=02c4589b59d6fb40888620df677c49ec&type=Server ğŸš€ DAILY GIVEAWAYS ğŸš€",
            "ğŸ’ EXCLUSIVE ACCESS ğŸ’ https://www.roblox.com/share?code=02c4589b59d6fb40888620df677c49ec&type=Server ğŸ’ LIMITED TIME ğŸ’",
            "ğŸ¯ BEST SERVER ğŸ¯ https://www.roblox.com/share?code=02c4589b59d6fb40888620df677c49ec&type=Server ğŸ¯ JOIN FAST ğŸ¯",
            "âš¡ 24/7 ACTIVE âš¡ https://www.roblox.com/share?code=02c4589b59d6fb40888620df677c49ec&type=Server âš¡ DON'T MISS âš¡"
        ],
        waitTime: 2000,
        intervalTime: 300,
        maxAttempts: 1000000,
        maxPosts: 3000000,
        randomDelay: true
    };
    
    let postCount = 0;
    let isRunning = true;
    
    console.log("ğŸ¤– AUTO POSTER STARTED");
    
    function wait(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }
    
    function getRandomText() {
        return config.texts[Math.floor(Math.random() * config.texts.length)];
    }
    
    function getRandomDelay() {
        if (!config.randomDelay) return config.intervalTime;
        return config.intervalTime + Math.random() * 5000;
    }
    
    async function findElement(selector, description) {
        for (let i = 0; i < config.maxAttempts; i++) {
            const element = document.querySelector(selector);
            if (element) {
                console.log(`âœ… ${description} FOUND`);
                return element;
            }
            console.log(`â³ WAITING FOR ${description}... (ATTEMPT ${i + 1})`);
            await wait(500);
        }
        throw new Error(`âŒ ${description} NOT FOUND`);
    }
    
    async function typeText(element, text) {
        element.focus();
        element.value = '';
        
        for (let char of text) {
            element.value += char;
            element.dispatchEvent(new Event('input', { bubbles: true }));
            element.dispatchEvent(new Event('change', { bubbles: true }));
            await wait(30 + Math.random() * 50);
        }
        
        console.log(`ğŸ“ TEXT TYPED: "${text}"`);
    }
    
    function triggerAngularClick(element) {
        const angularElement = angular.element(element);
        const scope = angularElement.scope();
        
        if (scope && scope.sendPost) {
            console.log("ğŸ”„ ANGULAR TRIGGERED");
            scope.$apply(() => {
                scope.sendPost();
            });
            return true;
        }
        
        try {
            angularElement.triggerHandler('click');
            console.log("ğŸ”„ ANGULAR CLICK");
            return true;
        } catch (e) {
            console.log("âŒ ANGULAR FAILED, USING NATIVE CLICK");
        }
        
        element.click();
        console.log("ğŸ–±ï¸ NATIVE CLICK");
        return true;
    }
    
    async function createPost() {
        try {
            postCount++;
            console.log(`\nğŸ”„ POST ${postCount} STARTING...`);
            
            const textSelectors = [
                'textarea',
                'input[type="text"]',
                '[contenteditable="true"]',
                '.text-field',
                '.post-input',
                '.comment-input'
            ];
            
            let textField = null;
            for (let selector of textSelectors) {
                textField = document.querySelector(selector);
                if (textField && textField.offsetParent !== null) break;
            }
            
            if (!textField) {
                const placeholders = ['What\'s new?', 'Post something...', 'Write a post...', 'Share something...'];
                for (let placeholder of placeholders) {
                    const element = document.querySelector(`[placeholder*="${placeholder}"]`);
                    if (element) {
                        textField = element;
                        break;
                    }
                }
            }
            
            if (!textField) throw new Error("NO TEXT FIELD FOUND");
            
            console.log("âœ… TEXT FIELD FOUND");
            await wait(config.waitTime);
            
            const text = getRandomText();
            await typeText(textField, text);
            await wait(config.waitTime);
            
            const buttonSelectors = [
                '#postButton',
                'button[ng-click*="sendPost"]',
                'button[ng-click*="Post"]',
                '.btn-control-md',
                '.group-form-button',
                'button:contains("Post")'
            ];
            
            let postButton = null;
            for (let selector of buttonSelectors) {
                postButton = document.querySelector(selector);
                if (postButton && postButton.offsetParent !== null) {
                    console.log(`âœ… BUTTON FOUND: ${selector}`);
                    break;
                }
            }
            
            if (!postButton) throw new Error("NO POST BUTTON FOUND");
            
            console.log("âœ… POST BUTTON FOUND");
            
            if (postButton.disabled) {
                console.log("âš ï¸ BUTTON DISABLED, RETRYING...");
                textField.dispatchEvent(new Event('input', { bubbles: true }));
                await wait(1000);
            }
            
            await wait(config.waitTime);
            
            console.log("ğŸ–±ï¸ CLICKING POST BUTTON...");
            triggerAngularClick(postButton);
            
            console.log(`ğŸ‰ POST ${postCount} COMPLETE!`);
            
            await wait(3000);
            
            if (config.maxPosts > 0 && postCount >= config.maxPosts) {
                console.log("ğŸ MAX POSTS REACHED. STOPPING...");
                isRunning = false;
                return false;
            }
            
            return true;
            
        } catch (error) {
            console.error("âŒ ERROR:", error.message);
            console.log("ğŸ’¡ RETRYING...");
            return true;
        }
    }
    
    async function startLoop() {
        console.log(`
ğŸ¤– ROBLOX AUTO POSTER
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ TEXTS: ${config.texts.length} VARIATIONS
â±ï¸  WAIT: ${config.waitTime}ms
ğŸ”„ INTERVAL: ${config.intervalTime}ms
ğŸ“Š MAX: ${config.maxPosts === 0 ? 'INFINITE' : config.maxPosts}

STARTING IN 3 SECONDS...
        `);
        
        await wait(3000);
        
        while (isRunning) {
            await createPost();
            if (!isRunning) break;
            
            const delay = getRandomDelay();
            console.log(`â° NEXT POST IN ${Math.round(delay/1000)}s...`);
            await wait(delay);
            
            if (postCount % 5 === 0) {
                console.log("ğŸ”„ REFRESHING PAGE...");
                location.reload();
                await wait(5000);
            }
        }
        
        console.log("ğŸ›‘ AUTO POSTER STOPPED.");
    }
    
    window.stopAutoPoster = function() {
        console.log("ğŸ›‘ MANUAL STOP!");
        isRunning = false;
    };
    
    window.startAutoPoster = function() {
        if (!isRunning) {
            isRunning = true;
            startLoop();
        }
    };
    
    console.log("ğŸ›ï¸  CONTROLS:");
    console.log("- stopAutoPoster() - STOP");
    console.log("- startAutoPoster() - START");
    
    startLoop();
    
})();
